{"version":3,"file":"utils-bb88efe0.js","sources":["../lib/utils.ts"],"sourcesContent":["import type { FormItemRule } from 'element-plus'\r\nimport type { FormOption } from './type.d'\r\n\r\ntype option = {\r\n  label: string\r\n  value: string,\r\n}\r\n/**\r\n * @description: 生成表单控件使用的option\r\n * @param arr 原始list\r\n * @param label 赋值label的key名\r\n * @param value 赋值value的key名\r\n * @param custom 自定义需要合并的对象\r\n */\r\nexport const getOption = (arr: Record<string, string>[] | string[], label: string, value: string, custom?: {}): option[] => {\r\n  if (!Array.isArray(arr)) return []\r\n  const options: option[] = []\r\n  let customKeys: string[] = []\r\n  if (custom) customKeys = Object.keys(custom)\r\n  arr.forEach((item) => {\r\n    let params: option & Record<string, string> = {\r\n      label: typeof item === 'string' ? item : item[label],\r\n      value: typeof item === 'string' ? item : item[value]\r\n    }\r\n    if (custom) {\r\n      customKeys.forEach((key) => {\r\n        params[key] = (item as Record<string, string>)[key]\r\n      })\r\n    }\r\n    options.push(params)\r\n  })\r\n  return options\r\n}\r\n\r\n/**\r\n * @description: 生成校验配置\r\n * @param formOption 表单配置 formOption[]\r\n * @param omit 不需要验证的key  string[]\r\n * @return formOption\r\n */\r\nexport const setRequired = (formOption: Pick<FormOption, 'type' | 'formItem'>[], omit: string[] = []): Pick<FormOption, 'type' | 'formItem'>[] => {\r\n  const type = {\r\n    'input': '输入',\r\n    'input-number': '输入',\r\n    'select': '选择',\r\n    'tree-select': '选择',\r\n    'cascader': '选择',\r\n    'radio': '选择',\r\n    'radio-button': '选择',\r\n    'checkbox': '选择',\r\n    'checkbox-button': '选择',\r\n    'date-picker': '选择',\r\n    'date-time-picker': '选择',\r\n    'time-picker': '选择',\r\n    'switch': '选择',\r\n    'upload': '上传',\r\n    'slot': '完善',\r\n  }\r\n  formOption.forEach((i) => {\r\n    const requiredObj: FormItemRule = { required: true, message: `请${(type[i.type] ?? '完善')}${i.formItem.label ?? ''}`, trigger: 'change' }\r\n    if (!omit.includes(i.formItem.prop)) {\r\n      if (i.formItem?.rules instanceof Object) {\r\n        i.formItem.rules = [requiredObj, i.formItem.rules as FormItemRule]\r\n      } else if (Array.isArray(i.formItem?.rules)) {\r\n        (i.formItem.rules as FormItemRule[]).unshift(requiredObj)\r\n      } else {\r\n        i.formItem.rules = [requiredObj]\r\n      }\r\n      if (i.formItem?.rules instanceof Array) {\r\n        for (let index = 0; index < i.formItem.rules.length; index++) {\r\n          let item = i.formItem.rules[index]\r\n          if (!item.message) item.message = '格式有误'\r\n        }\r\n      }\r\n    }\r\n  })\r\n  return formOption\r\n}"],"names":["getOption","arr","label","value","custom","options","customKeys","item","params","key","setRequired","formOption","omit","type","i","_a","_b","_c","requiredObj","index"],"mappings":"AAcO,MAAMA,IAAY,CAACC,GAA0CC,GAAeC,GAAeC,MAA0B;AACtH,MAAA,CAAC,MAAM,QAAQH,CAAG;AAAG,WAAO;AAChC,QAAMI,IAAoB,CAAA;AAC1B,MAAIC,IAAuB,CAAA;AACvB,SAAAF,MAAqBE,IAAA,OAAO,KAAKF,CAAM,IACvCH,EAAA,QAAQ,CAACM,MAAS;AACpB,QAAIC,IAA0C;AAAA,MAC5C,OAAO,OAAOD,KAAS,WAAWA,IAAOA,EAAKL,CAAK;AAAA,MACnD,OAAO,OAAOK,KAAS,WAAWA,IAAOA,EAAKJ,CAAK;AAAA,IAAA;AAErD,IAAIC,KACSE,EAAA,QAAQ,CAACG,MAAQ;AACnB,MAAAD,EAAAC,CAAG,IAAKF,EAAgCE,CAAG;AAAA,IAAA,CACnD,GAEHJ,EAAQ,KAAKG,CAAM;AAAA,EAAA,CACpB,GACMH;AACT,GAQaK,IAAc,CAACC,GAAqDC,IAAiB,OAAgD;AAChJ,QAAMC,IAAO;AAAA,IACX,OAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,QAAU;AAAA,IACV,eAAe;AAAA,IACf,UAAY;AAAA,IACZ,OAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,UAAY;AAAA,IACZ,mBAAmB;AAAA,IACnB,eAAe;AAAA,IACf,oBAAoB;AAAA,IACpB,eAAe;AAAA,IACf,QAAU;AAAA,IACV,QAAU;AAAA,IACV,MAAQ;AAAA,EAAA;AAEC,SAAAF,EAAA,QAAQ,CAACG,MAAM;AA5CrB,QAAAC,GAAAC,GAAAC;AA6CH,UAAMC,IAA4B,EAAE,UAAU,IAAM,SAAS,IAAKL,EAAKC,EAAE,IAAI,KAAK,OAAQA,EAAE,SAAS,SAAS,MAAM,SAAS;AAC7H,QAAI,CAACF,EAAK,SAASE,EAAE,SAAS,IAAI,QAC5BC,IAAAD,EAAE,aAAF,gBAAAC,EAAY,kBAAiB,SAC/BD,EAAE,SAAS,QAAQ,CAACI,GAAaJ,EAAE,SAAS,KAAqB,IACxD,MAAM,SAAQE,IAAAF,EAAE,aAAF,gBAAAE,EAAY,KAAK,IACvCF,EAAE,SAAS,MAAyB,QAAQI,CAAW,IAEtDJ,EAAA,SAAS,QAAQ,CAACI,CAAW,KAE7BD,IAAAH,EAAE,aAAF,gBAAAG,EAAY,kBAAiB;AAC/B,eAASE,IAAQ,GAAGA,IAAQL,EAAE,SAAS,MAAM,QAAQK,KAAS;AAC5D,YAAIZ,IAAOO,EAAE,SAAS,MAAMK,CAAK;AACjC,QAAKZ,EAAK,YAASA,EAAK,UAAU;AAAA;AAAA,EAGxC,CACD,GACMI;AACT;;;;;"}